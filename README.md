# ä»Šæ—¥é¤é»æŠ½å¡ç³»çµ± (Restaurant Gacha) ğŸ±

ä¸€å€‹çµåˆ **ã€Œåœ°åœ–æ¢ç´¢ã€**ã€**ã€Œç¤¾äº¤åˆ†äº«ã€** èˆ‡ **ã€ŒæŠ½å¡æ©Ÿåˆ¶ã€** çš„ç¾ä»£åŒ– Web æ‡‰ç”¨ã€‚
è§£æ±ºæ¯å¤©ä¸­åˆã€Œè¦åƒä»€éº¼ï¼Ÿã€çš„åƒå¤é›£é¡Œï¼Œè®“ä½ ä¸åƒ…èƒ½å»ºç«‹è‡ªå·±çš„ç¾é£Ÿæ¸…å–®ï¼Œé‚„èƒ½æ¢ç´¢ä¸¦æ”¶è—åˆ¥äººçš„å£è¢‹åå–®ï¼

---

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½ (Key Features)

### 1. æŠ½å¡ç³»çµ± (Gacha & Collection) ğŸ°
æ‰“ç ´é¸æ“‡å›°é›£ç—‡ï¼Œè®“å‘½é‹æ±ºå®šä½ çš„ä¸‹ä¸€é¤ï¼
- **éš¨æ©Ÿæ¬Šé‡ç®—æ³•**ï¼šä¾ç…§ç¨€æœ‰åº¦ (Common/Rare/Epic/Legend) é€²è¡ŒåŠ æ¬ŠæŠ½ç±¤ã€‚
- **æ¯æ—¥ä»»å‹™èˆ‡é€£æ“Š**ï¼šæ¯æ—¥ç™»å…¥èˆ‡æŠ½å¡å¯ç´¯ç© `User Stats` (é€£çºŒå¤©æ•¸ã€ç¸½æŠ½å¡æ•¸)ï¼Œè§£é–æˆå°±æ„Ÿã€‚
- **è‡ªå®šç¾©å¡æ± **ï¼šä½¿ç”¨è€…å¯é‡å°ç‰¹å®šæƒ…å¢ƒï¼ˆå¦‚ï¼šå…¬å¸åˆé¤ã€ç´„æœƒé¤å»³ï¼‰å»ºç«‹ä¸åŒçš„ç¾¤çµ„ (Groups) ä½œç‚ºæŠ½å¡æ± ã€‚

### 2. æ¥µè‡´çš„åœ°åœ–æ¢ç´¢ (Deep Search & Radar Scan) ğŸ—ºï¸
æˆ‘å€‘ä¸åªæ˜¯å‘¼å« Google APIï¼Œæ›´å¯¦ä½œäº†ç¨å®¶çš„æœå°‹æ¼”ç®—æ³•ï¼š
- **é›·é”æƒæ (Radar Scan)**ï¼šçªç ´ Google API å–®æ¬¡æœå°‹ç¯„åœé™åˆ¶ã€‚ç³»çµ±æœƒä»¥ä½¿ç”¨è€…ç‚ºä¸­å¿ƒï¼Œè‡ªå‹•è¨ˆç®— **æ±è¥¿å—åŒ—å„ 600m** çš„åç§»åº§æ¨™ï¼ŒåŒæ™‚ç™¼é€ 20~60 å€‹ä¸¦è¡Œè«‹æ±‚é€²è¡Œã€Œåœ°æ¯¯å¼æœç´¢ã€ã€‚
- **æ™ºæ…§éæ¿¾**ï¼š
  - **RankBy.DISTANCE**ï¼šæŒ–æ˜å··å¼„å°åº—ï¼Œè€Œéåªé¡¯ç¤ºå»£å‘Šååº—ã€‚
  - **è‡ªå‹•åŒ–è³‡æ–™æ¸…æ´—**ï¼šè‡ªå‹•éæ¿¾é‡è¤‡é¤å»³ï¼Œä¸¦å°‡ Google è©•åˆ† (1~5) è½‰æ›ç‚ºéŠæˆ²ç¨€æœ‰åº¦ (N/R/SR/SSR)ã€‚
- **ä¸€éµåŒ¯å…¥**ï¼šé»æ“Šé¤å»³å³å¯å°‡ `Name`ã€`Phone`ã€`Opening Hours` è‡ªå‹•å­˜å…¥è³‡æ–™åº«ï¼Œä¸¦å°‡ Google ç…§ç‰‡è½‰å­˜è‡³ **AWS S3** æ°¸ä¹…ä¿å­˜ã€‚

### 3. ç¤¾äº¤èˆ‡ç¤¾ç¾¤ (Social Network) ğŸ¤
- **å…¬é–‹ç¾¤çµ„ (Public Groups)**ï¼šä½¿ç”¨è€…å¯å°‡å¾—æ„çš„ç¾é£Ÿæ¸…å–®è¨­ç‚ºå…¬é–‹ã€‚
- **è¨‚é–±æ©Ÿåˆ¶ (Subscriptions)**ï¼šåœ¨ã€Œæ¢ç´¢é é¢ã€ç™¼ç¾ä»–äººçš„å„ªè³ªæ¸…å–®ï¼ˆä¾‹å¦‚ã€Œå°å¤§å‘¨é‚Šç¾é£Ÿã€ï¼‰å¾Œï¼Œå¯ç›´æ¥ `Save` åˆ°è‡ªå·±çš„å¸³è™Ÿï¼Œä¸¦å°‡å…¶ä½œç‚ºæŠ½å¡é¸é …ä¹‹ä¸€ã€‚
- **è³‡æ–™åº«é—œè¯**ï¼šé€é `saved_groups` ä¸­é–“è¡¨å¯¦ç¾å¤šå°å¤š (M:M) çš„è¨‚é–±é—œä¿‚ç®¡ç†ã€‚

---

## ğŸ— ç³»çµ±æ¶æ§‹ (System Architecture)

æ¡ç”¨ç¶“å…¸çš„ **ä¸‰å±¤å¼æ¶æ§‹ (3-Tier Architecture)** é…åˆç¾ä»£åŒ–é›²ç«¯è¨­æ–½ï¼š

### 1. Client Tier (å®¢æˆ¶ç«¯å±¤)
- **Frontend**: Vue 3 (Composition API) + Vite
- **State Management**: Pinia
- **Features**: SPA (å–®é æ‡‰ç”¨), Google Maps JS API æ·±åº¦æ•´åˆ

### 2. Server Tier (å¾Œç«¯æœå‹™å±¤)
- **Runtime**: Node.js + Express
- **API Design**: RESTful API
- **Layered Arch**: Controller -> Service -> Model (Data Access)
- **Security**: JWT Auth, Bcrypt åŠ å¯†, Express-Validator åƒæ•¸é©—è­‰

### 3. Infrastructure Tier (åŸºç¤è¨­æ–½å±¤)
- **Reverse Proxy**: **Caddy** (æ“”ä»» Gatewayï¼Œè² è²¬è‡ªå‹•åŒ– HTTPS æ†‘è­‰ç°½ç™¼èˆ‡æµé‡è½‰ç™¼)
- **Cloud & Network**: **AWS EC2** (é‹ç®—), **Cloudflare** (DNS & DDoS é˜²è­·), **AWS S3** (åœ–ç‰‡å„²å­˜)
- **Database**: **MySQL 8.0** (é—œè¯å¼è³‡æ–™åº«)
- **DevOps**: GitHub Actions CI/CD (è‡ªå‹•åŒ–æ¸¬è©¦èˆ‡éƒ¨ç½²), Docker Containerization

---

## ğŸ›  æŠ€è¡“æ£§ç¸½è¦½ (Tech Stack)

| é ˜åŸŸ | æŠ€è¡“/å·¥å…· | ç”¨é€” |
| :--- | :--- | :--- |
| **Frontend** | Vue 3, Vite, Axios | å¿«é€ŸéŸ¿æ‡‰çš„ UI é–‹ç™¼ |
| **Backend** | Node.js, Express | é«˜æ•ˆèƒ½éé˜»å¡ I/O æœå‹™ |
| **Database** | MySQL, UUIDv7 | å¼·ä¸€è‡´æ€§æ•¸æ“šå­˜å„² |
| **Proxy** | Caddy Server | è‡ªå‹• HTTPS, API Gateway |
| **DevOps** | Docker, GitHub Actions | å®¹å™¨åŒ–èˆ‡ CI/CD æµæ°´ç·š |
| **Integration** | Google Places/Maps API | LBS (Location Based Service) |
| **Storage** | AWS S3, Multer | åª’é«”æª”æ¡ˆè™•ç†èˆ‡é›²ç«¯å­˜å„² |

---

## ğŸ³ å¿«é€Ÿéƒ¨ç½² (Deployment)

æœ¬å°ˆæ¡ˆæ”¯æ´å®Œæ•´çš„ Docker åŒ–éƒ¨ç½²ã€‚

### 1. ç’°å¢ƒè®Šæ•¸è¨­å®š (.env)
è«‹ç¢ºä¿å°ˆæ¡ˆæ ¹ç›®éŒ„æœ‰ `.env` æª”æ¡ˆï¼ŒåŒ…å«ï¼š
```env
DB_HOST=mysql_db
DB_USER=root
DB_PASSWORD=your_password
AWS_ACCESS_KEY_ID=your_key
VITE_GOOGLE_MAPS_API_KEY=your_api_key
```

### 2. å•Ÿå‹•æœå‹™ (Docker Compose)
```bash
# å•Ÿå‹•æ‰€æœ‰æœå‹™ (Frontend, Backend, Database)
docker compose -f docker-compose.prod.yml up -d
```

### 3. è³‡æ–™åº«åˆå§‹åŒ–
è‹¥ç‚ºé¦–æ¬¡éƒ¨ç½²ï¼Œéœ€åŸ·è¡Œ Migration è…³æœ¬å»ºç«‹ Schemaï¼š
```bash
docker exec -it gacha-backend node scripts/init_db.js
```

è©³ç´°éƒ¨ç½²æµç¨‹è«‹åƒè€ƒ **[Deployment Guide (éƒ¨ç½²æŒ‡å—)](./deployment_guide.md)**ã€‚

---

## ğŸ“‚ è³‡æ–™åº«çµæ§‹ (Schema Snapshot)

- **users**: æ ¸å¿ƒç”¨æˆ¶ (1:1 å°æ‡‰ `user_stats`)
- **dishes**: é¤å»³è³‡æ–™ (é€é `dish_groups` èˆ‡ `groups` å½¢æˆ M:M å¤šå°å¤šé—œä¿‚)
- **groups**: é¤é»ç¾¤çµ„ (åˆ†ç‚º Owned èˆ‡ Saved å…©é¡)
- **draws**: æŠ½å¡æ­·å²ç´€éŒ„ (é—œè¯ User, Group, Dish)

---

## ğŸ“ License
Copyright Â© 2025 Restaurant Gacha Team.
